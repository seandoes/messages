<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD2WGPTC5HiNzzlyiTvp3j0a_KLB1SCc2s&sensor=false">
</script>
<script type="text/javascript">
  var map ;
  var myLatlng = new google.maps.LatLng(41.8887228, -87.6363863);
  function initialize() {
    var mapOptions = {
        center: myLatlng,
        zoom: 13,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };
        map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
  }

  function paintSpots(lat, long) {
      alert('Hi!') ;
      var marker = new google.maps.Marker({
        position: new google.maps.LatLng(lat, long),
        map: map,
        title:"Hello World2!"
      });
  }
</script>

<div id="map_canvas" style="width:400px;height:400px;">
<p>If you can see this, the script to render the map didnt fire</p>
</div>

<br />

<h1>Listing messages</h1>

<table>
  <tr>
    <th>User</th>
    <th>Copy</th>
    <th>Latitude</th>
    <th>Longitude</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @messages.each do |message| %>
  <tr>
    <td><%= message.user_id %></td>
    <td><%= message.copy %></td>
    <td><%= message.latitude %></td>
    <td><%= message.longitude %></td>
    <td <%= link_to 'Show', message %></td>
    <td><%= link_to 'Edit', edit_message_path(message) %></td>
    <td><%= link_to 'Destroy', message, method: :delete, data: { confirm: 'Are you sure?' } %></td>

  <script type="text/javascript">
    paintSpots(<%= message.latitude %>, <%= message.longitude %>);
  </script>

  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Message', new_message_path %>

